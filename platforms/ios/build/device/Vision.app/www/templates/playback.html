<div class="content_padding" id="playback">
  <div ng-hide="programme || playback_error">
    <h2>Waiting for programme to load</h2>
    <img src="images/ajax-loader.gif" class="spinner" ng-hide="programme" />
  </div>

  <div ng-show="playback_error" class="error-message">
    <p>Problem getting programme information</p>
    <p>Ensure you're on the Lancaster network either via eduroam or by connecting over VPN.</p>
  </div>

  <div ng-show="programme" class="group">
    <h2>{{ programme.programme_name }} <small ng-show="programme.sub_title">Episode {{ programme.sub_title }}</small></h2>
    <article>
      <div id="video_wrapper" ng-show="programme.watch_live || programme.watch_catchup">
        <ul class="tabs group">
          <li ng-class="{ active: tab_selection == 'watch_here' }"><a ng-click="switch_tabs('watch_here')">This Device</a></li>
          <li ng-class="{ active: tab_selection == 'second_screen' }"><a ng-click="switch_tabs('second_screen')">Other Devices</a></li>
        </ul>

        <div class="tabs_content">
          <div ng-show="tab_selection == 'watch_here'">
            <video id="video-player" src="" height="100%" controls="controls" preload='auto'>
              <p>Sorry, your device is not capable of playing our videos</p>
            </video>
          </div>

          <div ng-show="tab_selection == 'second_screen'">
            <ul class="devices_list">
              <li ng-repeat="device in (filtered_devices = (connected_devices | filter: { can_playback: true }))" data-device-id="{{ device.socket_id }}" class="group">
                <span ng-show="is_chrome(device.user_agent)">Chrome</span>
                <span ng-show="is_playstation_3(device.user_agent)">PlayStation 3</span>

                <div class="controls group">
                  <a ng-click="play_remote(device.socket_id, false)">Play From Beginning</a>
                  <a ng-click="play_remote(device.socket_id, true)">Resume</a>
                  <a ng-click="pause_remote(device.socket_id)">Pause</a>
                </div>
              </li>

              <li ng-show="filtered_devices.length == 0">
                <span>There are no second screen devices currently available</span>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="message" ng-show="programme.available_soon">
        <p>This programme is currently being recorded and processed.</p>
        <p>It'll be available here soon.</p>
      </div>
      <div class="message" ng-show="programme.waiting_to_be_recorded">
        <p>This programme has not been broadcast yet.</p>
        <p>Come back here later to watch it live or on demand</p>
      </div>
      <div class="message" ng-show="programme.not_available && !programme.waiting_to_be_recorded">
        <p>This programme is not available to watch.</p>
      </div>
      <button id="watch_later" class="large_button" ng-click="watch_later()">
        <span class="glyphicons plus icon"></span> Add to my Watch Later list
      </button>

      <!--<button class="large_button" ng-click="play_second_screen()">-->
        <!--<span class="glyphicons play icon"></span> Play on my Second Screen device-->
      <!--</button>-->

    </article>
    <aside>
      <dl>
        <dt ng-show="programme.episode">Episode</dt>
        <dd ng-show="programme.episode">{{ programme.episode }}</dd>

        <dt ng-show="programme.synopsis">Synopsis</dt>
        <dd ng-show="programme.synopsis">{{ programme.synopsis }}</dd>

        <dt ng-show="programme.broadcast">Date</dt>
        <dd ng-show="programme.broadcast">{{ programme.broadcast }}</dd>

        <dt ng-show="programme.channel_image">Channel</dt>
        <dd ng-show="programme.channel_image">
         <channel-image path="programme.channel_image" width="100" height="56" />
        </dd>

        <dt ng-show="programme.director">Director</dt>
        <dd ng-show="programme.director">{{ programme.director }}</dd>

        <dt ng-show="programme.genre && programme.genre != 'Unclassified'">Genre</dt>
        <dd ng-show="programme.genre && programme.genre != 'Unclassified'">{{ programme.genre }}</dd>

        <dt>Duration</dt>
        <dd>{{ programme.duration }}</dd>
      </dl>
    </aside>
  </div>
</div>
