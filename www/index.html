<!DOCTYPE html>
<html ng-app="vision">
<head>
  <meta charset="utf-8">
  <title>Vision Mobile Application</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

  <link href="css/reset.css" rel="stylesheet">
  <link href="css/glyphicons.css" rel="stylesheet">
  <link href="css/styles.css" rel="stylesheet">
  <link href="css/nav-bars.css" rel="stylesheet">
  <link href="css/lists.css" rel="stylesheet">
  <link href="css/pageslider.css" rel="stylesheet">

  <!-- In the <head> as it needs to load before the page DOM is built -->
  <script src="lib/modernizr.js"></script>
</head>
<body>

  <header class="bar bar-nav">
    <h1 id="page-title">{{ title ? title : "Vision Mobile" }}</h1>
    <img src="images/vision_logo.png" />
  </header>

  <nav class="bar bar-tab" ng-show="logged_in">
    <a class="tab-item" href="#/guide" ng-class="{ active: title == 'Programme Guide' }">
      <span class="glyphicons calendar icon"></span>
      <span class="tab-label">Guide</span>
    </a>
    <a class="tab-item" href="#/history" ng-class="{ active: title == 'History' }">
      <span class="glyphicons clock icon"></span>
      <span class="tab-label">History</span>
    </a>
    <a class="tab-item" href="#/" ng-class="{ active: title == 'Dashboard' }">
      <span class="glyphicons home icon"></span>
      <span class="tab-label">Dashboard</span>
    </a>
    <a class="tab-item" href="#/favourites" ng-class="{ active: title == 'Favourites' }">
      <span class="glyphicons bookmark icon"></span>
      <span class="tab-label">Favourites</span>
    </a>
    <a class="tab-item" href="#/search" ng-class="{ active: title == 'Search' }">
      <span class="glyphicons search icon"></span>
      <span class="tab-label">Search</span>
    </a>
  </nav>

  <div class="content" ng-view>
    <!-- This gets replaced by Angular -->
  </div>

  <script type="text/ng-template" id="dashboard.html">
    <p>Welcome to Vision</p>
    <ul id="channel-list" class="flex-container">
      <li class="table-view-cell group" ng-repeat="programme in programmes">
        <a href="#/programmes/{{ programme.programme_id }}?live_channel={{ programme.wowza_code }}">
          <div class="left">
            <img src="http://148.88.32.64/cache/170x100-2/programmes{{ programme.image }}" style="width: 85px; height: 50px;" />
          </div>
          <div class="right">
            <p>{{ programme.programme_name }}</p>
            <p class="small">{{ programme.synopsis }}</p>
            <p class="metadata">{{ programme.channel_name }} &middot; {{ programme.duration }} minutes</p>
            <span class="glyphicons chevron-right"></span>
          </div>
        </a>
      </li>
    </ul>
    <a ng-click="logout()">Logout</a>
  </script>

  <script type="text/ng-template" id="history.html">
    <ul id="channel-list" class="flex-container">
      <li class="table-view-cell group" ng-repeat="programme in history">
        <a href="#/programmes/{{ programme.programme_id }}">
          <div class="left">
            <img src="http://148.88.32.64/cache/170x100-2/programmes{{ programme.image }}" style="width: 85px; height: 50px;" />
          </div>
          <div class="right">
            <p>{{ programme.programme_name }}</p>
            <p class="small">{{ programme.synopsis }}</p>
            <p class="metadata">{{ programme.channel_name }} &middot; {{ programme.duration }} minutes</p>
            <span class="glyphicons chevron-right"></span>
          </div>
        </a>
      </li>
    </ul>
  </script>

  <script type="text/ng-template" id="favourites.html">
    <p>Favourites view</p>
  </script>

  <script type="text/ng-template" id="search.html">
    <p>Search view</p>
  </script>

  <script type="text/ng-template" id="guide.html">
    <p>Guide view</p>
  </script>

  <script type="text/ng-template" id="playback.html">
    <div ng-hide="programme">
      <p>Waiting for programme to load</p>
    </div>

    <div ng-show="programme">
      <h2>{{ programme.p_name }} <small ng-show="programme.sub_title">{{ programme.sub_title }}</small></h2>

      <video id="video-player" src="" height="240" width="360" onclick="this.play();" poster="">
        <p>Sorry, your device is not capable of playing our videos</p>
      </video>

      <p>{{ programme.p_synopsis }}</p>
      <img src="http://148.88.32.64/cache/170x100-2/programmes{{programme.channel_image}}" style="width: 85px; height: 50px;" />
      <p>{{ programme.channel_name }}</p>
      <p>Duration: {{ programme.duration_minutes }} minutes</p>
      <p>Genre: {{ programme.genre }}</p>
    </div>
  </script>

  <script type="text/ng-template" id="login.html">
    <p>Login to Vision Mobile</p>
    <p>{{ pin_code ? pin_code : 'Type your PIN code' }}</p>

    <!-- Build the numerical keypad -->
    <button type="button" ng-click="append('0')">0</button>
    <button type="button" ng-click="append('1')">1</button>
    <button type="button" ng-click="append('2')">2</button>
    <button type="button" ng-click="append('3')">3</button>
    <button type="button" ng-click="append('4')">4</button>
    <button type="button" ng-click="append('5')">5</button>
    <button type="button" ng-click="append('6')">6</button>
    <button type="button" ng-click="append('7')">7</button>
    <button type="button" ng-click="append('8')">8</button>
    <button type="button" ng-click="append('9')">9</button>

    <button type="submit" ng-click="login()">Login</button>
    <p ng-show="error_message">{{ error_message }}</p>
  </script>

  <!-- Load cordova framework script -->
  <script src="cordova.js"></script>

  <!-- Load libs -->
  <script src="lib/jquery.js"></script>
  <script src="lib/fastclick.js"></script>
  <script src="lib/angular/angular.min.js"></script>
  <script src="lib/angular/angular-animate.min.js"></script>
  <script src="lib/angular/angular-resource.min.js"></script>
  <script src="lib/angular/angular-route.min.js"></script>

  <!-- Finally load application  -->
  <script src="js/app.js"></script>
  <script src="js/dashboard.js"></script>
  <script src="js/favourites.js"></script>
  <script src="js/history.js"></script>
  <script src="js/search.js"></script>
  <script src="js/playback.js"></script>
  <script src="js/guide.js"></script>
  <script src="js/login.js"></script>
</body>
</html>
