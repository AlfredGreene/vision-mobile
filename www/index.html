<!DOCTYPE html>
<html ng-app="vision">
<head>
  <meta charset="utf-8">
  <title>Vision Mobile Application</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

  <link href="css/reset.css" rel="stylesheet">

  <link href="lib/mediaelement/mediaelementplayer.min.css" rel="stylesheet">
  <link href="lib/mediaelement/mejs-skins.css" rel="stylesheet">

  <link href="css/glyphicons.css" rel="stylesheet">
  <link href="css/styles.css" rel="stylesheet">
  <link href="css/nav-bars.css" rel="stylesheet">
  <link href="css/lists.css" rel="stylesheet">
  <link href="css/pageslider.css" rel="stylesheet">
  <link href="css/layout.css" rel="stylesheet">

  <!-- In the <head> as it needs to load before the page DOM is built -->
  <script src="lib/modernizr.js"></script>
</head>
<body>

  <header class="bar bar-nav">
    <h1 id="page-title">{{ title ? title : "Vision Mobile" }}</h1>
    <img src="images/vision_logo.png" />
  </header>

  <nav class="bar bar-tab" ng-show="logged_in" ng-class="{ visible: logged_in }">
    <a class="tab-item" href="#/guide" ng-class="{ active: title == 'Programme Guide' }">
      <span class="glyphicons calendar icon"></span>
      <span class="tab-label">Guide</span>
    </a>
    <a class="tab-item" href="#/history" ng-class="{ active: title == 'History' }">
      <span class="glyphicons clock icon"></span>
      <span class="tab-label">History</span>
    </a>
    <a class="tab-item" href="#/" ng-class="{ active: title == 'Dashboard' }">
      <span class="glyphicons home icon"></span>
      <span class="tab-label">Dashboard</span>
    </a>
    <a class="tab-item" href="#/favourites" ng-class="{ active: title == 'Favourites' }">
      <span class="glyphicons bookmark icon"></span>
      <span class="tab-label">Favourites</span>
    </a>
    <a class="tab-item" href="#/search" ng-class="{ active: title == 'Search' }">
      <span class="glyphicons search icon"></span>
      <span class="tab-label">Search</span>
    </a>
  </nav>

  <div class="content" ng-view>
    <!-- This gets replaced by Angular -->
  </div>

  <script type="text/ng-template" id="dashboard.html">
    <div class="content_padding">
      <h2>Recommendations</h2>
      <ul id="channel-list" class="flex-container">
        <img src="images/ajax-loader.gif" class="spinner" ng-hide="recommendations" />
        <li class="table-view-cell group" ng-repeat="programme in recommendations">
          <a href="#/programmes/{{ programme.programme_id }}">
            <div class="left">
              <img src="http://148.88.32.64/cache/170x100-2/programmes{{ programme.image }}" style="width: 85px; height: 50px;" />
            </div>
            <div class="right">
              <p>{{ programme.programme_name }}</p>
              <p class="small">{{ programme.synopsis | cut:true:130:' ...' }}</p>
              <p class="metadata">{{ programme.channel_name }} &middot; {{ programme.duration }} minutes</p>
              <span class="glyphicons chevron-right"></span>
            </div>
          </a>
        </li>
      </ul>

      <h2>Trending</h2>
      <ul id="channel-list" class="flex-container">
        <img src="images/ajax-loader.gif" class="spinner" ng-hide="trending" />
        <li class="table-view-cell group" ng-repeat="programme in trending">
          <a href="#/programmes/{{ programme.programme_id }}">
            <div class="left">
              <img src="http://148.88.32.64/cache/170x100-2/programmes{{ programme.image }}" style="width: 85px; height: 50px;" />
            </div>
            <div class="right">
              <p>{{ programme.programme_name }}</p>
              <p class="small">{{ programme.synopsis | cut:true:130:' ...' }}</p>
              <p class="metadata">{{ programme.channel_name }} &middot; {{ programme.duration }} minutes</p>
              <span class="glyphicons chevron-right"></span>
            </div>
          </a>
        </li>
      </ul>

      <p id="footer">
        Developed by Ross Wilson &middot; <a ng-click="logout()">Logout</a>
      </p>
    </div>
  </script>

  <script type="text/ng-template" id="history.html">
    <ul id="channel-list" class="flex-container">
      <li class="table-view-cell group" ng-repeat="programme in history">
        <a href="#/programmes/{{ programme.programme_id }}">
          <div class="left">
            <img src="http://148.88.32.64/cache/170x100-2/programmes{{ programme.image }}" style="width: 85px; height: 50px;" />
          </div>
          <div class="right">
            <p>{{ programme.programme_name }}</p>
            <p class="small">{{ programme.synopsis }}</p>
            <p class="metadata">{{ programme.channel_name }} &middot; {{ programme.duration }} minutes</p>
            <span class="glyphicons chevron-right"></span>
          </div>
        </a>
      </li>
    </ul>
  </script>

  <script type="text/ng-template" id="favourites.html">
    <p>Favourites view</p>
  </script>

  <script type="text/ng-template" id="search.html">
    <p>Search view</p>
  </script>

  <script type="text/ng-template" id="guide.html">
    <div class="content_padding">
      <h2>Live Channels</h2>
      <ul id="channel-list" class="flex-container">
        <img src="images/ajax-loader.gif" class="spinner" ng-hide="programmes" />
        <li class="table-view-cell group" ng-repeat="programme in programmes">
          <a href="#/programmes/{{ programme.programme_id }}?live_channel={{ programme.wowza_code }}">
            <div class="left">
              <img src="http://148.88.32.64/cache/170x100-2/programmes{{ programme.image }}" style="width: 85px; height: 50px;" />
            </div>
            <div class="right">
              <p>{{ programme.programme_name }}</p>
              <p class="small">{{ programme.synopsis }}</p>
              <p class="metadata">{{ programme.channel_name }} &middot; {{ programme.duration }} minutes</p>
              <span class="glyphicons chevron-right"></span>
            </div>
          </a>
        </li>
      </ul>
    </div>
  </script>

  <script type="text/ng-template" id="playback.html">
    <div class="content_padding" id="playback">
      <div ng-hide="programme">
        <h2>Waiting for programme to load</h2>
        <img src="images/ajax-loader.gif" class="spinner" ng-hide="programme" />
      </div>

      <div ng-show="programme" class="group">
        <h2>{{ programme.p_name }} <small ng-show="programme.sub_title">Episode {{ programme.sub_title }}</small></h2>
        <article>
          <div id="video_wrapper">
            <video id="video-player" src="" width="100%" height="100%" controls="controls">
              <p>Sorry, your device is not capable of playing our videos</p>
            </video>
          </div>
        </article>
        <aside>
          <dl>
            <dt ng-show="programme.episode">Episode</dt>
            <dd ng-show="programme.episode">{{ programme.episode }}</dd>

            <dt>Synopsis</dt>
            <dd>{{ programme.synopsis ? programme.synopsis : programme.p_synopsis }}</dd>

            <dt>Date</dt>
            <dd>{{ programme.p_start }}</dd>

            <dt>Channel</dt>
            <dd><img src="http://148.88.32.64/cache/170x100-2/programmes{{programme.channel_image}}" style="width: 85px; height: 50px;" /></dd>

            <dt ng-show="programme.director">Director</dt>
            <dd ng-show="programme.director">{{ programme.director }}</dd>

            <dt ng-show="programme.genre">Genre</dt>
            <dd ng-show="programme.genre">{{ programme.genre }}</dd>

            <dt>Duration</dt>
            <dd>{{ programme.duration }} minutes</dd>
          </dl>
        </aside>
      </div>
    </div>
  </script>

  <script type="text/ng-template" id="login.html">
    <div class="flex_vertical_center blue_gradient">
      <div class="login_wrapper">
        <h2>Welcome</h2>
        <p>Visit Vision on your computer to get a PIN code to use this mobile app.</p>

        <div id="pin_preview">
          <p class="code" ng-show="pin_code != ''">{{ pin_code }}</p>
          <p class="placeholder" ng-show="pin_code == '' && !error_message">Enter PIN with the buttons below</p>
          <p class="placeholder error" ng-show="error_message" ng-hide="pin_code != ''">{{ error_message }}</p>
        </div>

        <!-- Build the numerical keypad -->
        <div id="keypad" class="group">
          <button type="button" ng-click="append('1')">1</button>
          <button type="button" ng-click="append('2')">2</button>
          <button type="button" ng-click="append('3')">3</button>
          <button type="button" ng-click="append('4')">4</button>
          <button type="button" ng-click="append('5')">5</button>
          <button type="button" ng-click="append('6')">6</button>
          <button type="button" ng-click="append('7')">7</button>
          <button type="button" ng-click="append('8')">8</button>
          <button type="button" ng-click="append('9')">9</button>
          <button type="button" ng-click="append('0')">0</button>
        </div>

        <div class="group">
          <button type="submit" ng-click="login()" id="login_btn">Login</button>
          <button type="submit" ng-click="clear()" id="clear_btn">Clear</button>
        </div>
      </div>
    </div>
  </script>

  <!-- Load cordova framework script -->
  <script src="cordova.js"></script>

  <!-- Load libs -->
  <script src="lib/jquery.js"></script>
  <script src="lib/fastclick.js"></script>
  <script src="lib/mediaelement/mediaelement-and-player.min.js"></script>
  <script src="lib/angular/angular.min.js"></script>
  <script src="lib/angular/angular-animate.min.js"></script>
  <script src="lib/angular/angular-resource.min.js"></script>
  <script src="lib/angular/angular-route.min.js"></script>

  <!-- Finally load application  -->
  <script src="js/app.js"></script>
  <script src="js/dashboard.js"></script>
  <script src="js/favourites.js"></script>
  <script src="js/history.js"></script>
  <script src="js/search.js"></script>
  <script src="js/playback.js"></script>
  <script src="js/guide.js"></script>
  <script src="js/login.js"></script>

  <script>
    $('video,audio').mediaelementplayer(/* Options */);
  </script>
</body>
</html>
